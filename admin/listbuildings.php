<?include_once 'includes/admin.inc.php';checkIsAdmin();include_once '../includes/template.inc.php';template('Admin List Buildings', 'adminListBuildingsBody');function adminListBuildingsBody(){	global $eol, $mysqli, $lookups;	$query = $mysqli->prepare('SELECT buildingid,buildingname,mincolonylevel,maxbuildinglevel,buildingdescription,metalcostbase,metalcostlinear,metalcostmultiplier,multiplybyplanet,bignorecolonylevel FROM buildings ORDER BY buildingid');	$query->bind_result($buildingid,$buildingname,$mincolonylevel,$maxlevel,$buildingdescription,$metalcostbase,$metalcostLinear,$metalcostmultiplier,$multiplybyplanet,$ignorecolonylevel);	$consumesquery = $mysqli->prepare('SELECT type,base,linear,multiplier FROM consumeslist WHERE buildingid=?');	$consumesquery->bind_param('i', $buildingid);	$consumesquery->bind_result($consumestype,$consumesbase,$consumeslinear,$consumesmultiplier);	$effectquery = $mysqli->prepare('SELECT type,base,linear,multiplier FROM effectslist WHERE buildingid=?');	$effectquery->bind_param('i', $buildingid);	$effectquery->bind_result($effecttype,$effectbase,$effectlinear,$effectmultiplier);	echo '<table>', $eol;	echo '<tr><th colspan="4"></th><th colspan="4">Building Cost</th><th colspan="4">Consumption</th><th colspan="5">Effect</th><th colspan="2"></th></tr>', $eol;	echo '<tr><th>Building ID</th><th>Name</th><th>Min Colony Level</th><th>Max Level</th><th>Description</th><th>Base</th><th>Linear</th><th>Multiplier</th><th>Resource</th><th>Base</th><th>Linear</th><th>Multiplier</th><th>Type</th><th>Base</th><th>Linear</th><th>Multiplier</th><th>Planet multiplies?</th><th>Exceed colony level?</th><th>Actions</th></tr>', $eol;	$query->execute();	$query->store_result();	while($query->fetch())	{		echo "<tr><td>$buildingid</td><td>$buildingname</td><td>$mincolonylevel</td><td>$maxlevel</td><td>$buildingdescription</td>";		echo "<td>$metalcostbase</td>", '<td>', round($metalcostlinear,2), '</td>', '<td>', round($metalcostmultiplier,2), '</td>';		echo '<td colspan="4">';		$consumesquery->execute();		if($consumesquery->fetch())		{			echo '<table>', $eol;			do			{				echo '<tr><td>', $lookups["resourceType"][$consumestype], '</td><td>', -$consumesbase, '</td><td>', round($consumeslinear,2), '</td><td>', round($consumesmultiplier,2), '</td></tr>';			}			while($consumesquery->fetch());			echo '</table>';		}		$consumesquery->reset();		echo '</td>';		echo '<td colspan="4">';		$effectquery->execute();		if($effectquery->fetch())		{			echo '<table>', $eol;			do			{				echo '<tr><td>', $lookups["resourceType"][$effecttype], '</td><td>', $effectbase, '</td><td>', round($effectlinear,2), '</td><td>', round($effectmultiplier,2), '</td></tr>';			}			while($effectquery->fetch());			echo '</table>';		}		$effectquery->reset();		echo '</td>';		echo '<td>',($multiplybyplanet)?"Yes":"No",'</td><td>',($ignorecolonylevel)?"Yes":"No",'</td>';		echo '<td><a href="buildinglevels.php?building=', $buildingid, '">Details</a></td>';		echo '</tr>', $eol;	}?><form action="addbuilding_exec.php" method="post"><tr><td></td><td><input type="text" name="name" size="10"></td><td><input type="text" name="mincolonylevel" size="4"></td><td><input type="text" name="maxlevel" size="4"></td><td><textarea name="description" rows="5" cols="35"></textarea></td><td><input type="text" name="costbase" size="4"></td><td><input type="text" name="costlinear" size="4"></td><td><input type="text" name="costmult" size="4"></td><!--<td><?htmlDropdown('consumestype','resourceType')?></td><td><input type="text" name="consumesbase" size="4"></td><td><input type="text" name="consumeslinear" size="4"></td><td><input type="text" name="consumesmult" size="4"></td>--><td colspan="4"></td><!--<td><?htmlDropdown('effecttype','buildingEffect')?></td><td><input type="text" name="effectbase" size="4"></td><td><input type="text" name="effectlinear" size="4"></td><td><input type="text" name="effectmult" size="4"></td>--><td colspan="4"></td><td><input type="checkbox" name="multiplybyplanet" value=1></td><td><input type="checkbox" name="bignorecolonylevel" value=1></td><td><input type="submit" value="Add"></td></tr></form><?	echo '</table>', $eol;	echo '<br>', $eol;	echo '<a href="updatebuildings.php">Update Colonies</a> with new building stats.', $eol;	echo '<br>', $eol;	echo 'Base is actual value at level 1<br>', $eol;	echo 'Linear is linear increase per level. 0 means no effect, 1 means add the base again every level.<br>', $eol;	echo 'Multiplier is exponential increase per level. Each level, Base is multiplied by this again. 1 means no effect, 2 means double every level.<br>', $eol;}?>