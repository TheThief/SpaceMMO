<?include 'includes/start.inc.php';checkLoggedIn();include 'includes/template.inc.php';template('Create Ship Designs', 'designCreateBody');function designCreateBody(){	global $eol, $mysqli;	$names = array();	$stmt = $mysqli->prepare("SELECT * FROM shiphulls");	$stmt->execute();	$stmt->bind_result($hull,$hullname,$hulldesc,$cost,$size,$maxweap);?><script type="text/javascript">var names = new Array();var desc = new Array();var cost = new Array();var size = new Array();var weap = new Array();<?	while($stmt->fetch()){		$names[$hull]=$hullname;		//echo "names[" . $hull ."]=\"". $hullname ."\";\n";		echo "desc[" . $hull ."]=\"". str_replace('"','\"',$hulldesc) ."\";\n";		echo "cost[" . $hull ."]=\"". $cost ."\";\n";		echo "weap[" . $hull ."]=\"". $maxweap ."\";\n";		echo "size[" . $hull ."]=\"". $size ."\";\n";	}?>function loadShip(){	var index = document.getElementById("hullselect").selectedIndex;	var ship = document.getElementById("hullselect")[index].value;	document.getElementById("description").innerHTML=desc[ship];	document.getElementById("size").innerHTML=size[ship];	document.getElementById("cost").innerHTML=cost[ship];	document.getElementById("maxweapons").innerHTML=weap[ship];}function getPartsSize(){	var engines = parseInt(document.getElementById("engines").value);	var fuel = parseInt(document.getElementById("fuel").value);	var cargo = parseInt(document.getElementById("cargo").value);	var weapons = parseInt(document.getElementById("weapons").value);	var shields = parseInt(document.getElementById("shields").value);	return engines + fuel + cargo + weapons + shields;}function validate(form){	var calcsize = getPartsSize();	var index = document.getElementById("hullselect").selectedIndex;        var ship = document.getElementById("hullselect")[index].value;	var wep = parseInt(document.getElementById("weapons").value);	var engines = parseInt(document.getElementById("engines").value);        var fuel = parseInt(document.getElementById("fuel").value);	var shsz = size[ship];	var mw = weap[ship];	if(calcsize > shsz){		alert("You have overloaded your ship by " + (calcsize -shsz) + ".");		return false;	}	if(calcsize < shsz){                alert("You have " + (shsz-calcsize) + " more space too fill.");                return false;        }	if(wep > mw){		alert("You have too many weapons. You need to remove " + (wep - mw) + ".");                return false;	}	if(engines<1){                alert("You need at least 1 engine.");                return false;        }	if(fuel<1){                alert("You need at least 1 Fuel.");                return false;        }	if((calcsize == shsz) && (wep<=mw)) return true;	return false;	}</script><h1>Create Ship Designs</h1><form name="desform" action="addshipdesign_exec.php" method="post" onsubmit="return validate(this)"><select name="hull" id="hullselect" onChange="loadShip()"><?	foreach($names as $key => $value){		echo "<option value=\"" . $key ."\">" . $value . "</option>\n";	}?></select><br>Description: <span id="description"></span> <br>Cost: <span id="cost">0</span> Size: <span id="size">0</span> Max Weapons: <span id="maxweapons">0</span><br><br>Ship Name: <input type="text" name="shipname" id="shipname"><br>Engines: <input type="text" name="engines" id="engines" value=1> Fuel: <input type="text" name="fuel" id="fuel" value=1><br>Cargo: <input type="text" name="cargo" id="cargo" value="0"> Weapons: <input type="text" name="weapons" id="weapons" value=0> Shields: <input type="text" name="shields" id="shields" value=0> <br><input type="Submit" name="save" id="save" value="Save"></form><?}?><script type="text/javascript">loadShip();</script>